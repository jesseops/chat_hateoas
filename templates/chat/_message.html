<article
  id="message-{{ message.id }}"
  class="message message--{{ message.role }} {% if message.status == 'streaming' %}is-streaming{% endif %}"
  {% if oob %}hx-swap-oob="outerHTML"{% endif %}
>
  <div class="message-meta">
    <span class="role-pill role-pill--{{ message.role }}">
      {% if message.role == "user" %}
        {% include "chat/_icons/user.svg" %}
      {% else %}
        {% include "chat/_icons/bot.svg" %}
      {% endif %}
      {{ "You" if message.role == "user" else "Assistant" }}
    </span>
    <time class="message-time" datetime="{{ message.created_at }}">
      <span class="label-with-icon">{% include "chat/_icons/clock.svg" %}{{ message.created_at | fmt_ts }}</span>
    </time>
  </div>
  <div class="message-bubble">{{ message.rendered_html | safe }}</div>

  {% if message.role == "assistant" and message.status == "complete" %}
    {% set message_id = message.id %}
    {% set vote = message.feedback_vote %}
    {% include "chat/_feedback.html" %}
  {% endif %}
</article>

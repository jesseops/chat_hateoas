<aside id="conversation-list" class="conversation-list" {% if oob %}hx-swap-oob="outerHTML"{% endif %}>
  <div class="conversation-head">
    <h2><span class="label-with-icon">{% include "chat/_icons/messages.svg" %}Conversations</span></h2>
    <button
      class="new-conversation"
      type="button"
      hx-post="{{ url_for('web.create_conversation') }}"
      hx-target="#thread-panel"
      hx-swap="outerHTML transition:true"
    >
      <span class="label-with-icon">{% include "chat/_icons/plus.svg" %}New chat</span>
    </button>
  </div>

  <nav class="conversation-items">
    {% for item in conversations %}
    <div class="conversation-row {% if item.id == active_id %}active{% endif %}">
      <a
        class="conversation-link"
        href="{{ url_for('web.get_conversation', conversation_id=item.id) }}"
        hx-get="{{ url_for('web.get_conversation', conversation_id=item.id) }}"
        hx-target="#thread-panel"
        hx-swap="outerHTML transition:true"
        hx-push-url="true"
      >
        <span class="conversation-title">
          <span class="label-with-icon">{% include "chat/_icons/message.svg" %}{{ item.title }}</span>
        </span>
        <time class="conversation-time" datetime="{{ item.updated_at }}">
          <span class="label-with-icon">{% include "chat/_icons/clock.svg" %}{{ item.updated_at | fmt_ts }}</span>
        </time>
      </a>
      <button
        class="delete-conversation"
        type="button"
        hx-post="{{ url_for('web.delete_conversation', conversation_id=item.id) }}"
        hx-target="#thread-panel"
        hx-swap="outerHTML transition:true"
        hx-confirm="Delete this conversation?"
        title="Delete conversation"
      >
        <span class="label-with-icon">{% include "chat/_icons/trash.svg" %}Delete</span>
      </button>
    </div>
    {% endfor %}
  </nav>
</aside>
